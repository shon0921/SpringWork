<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>문의 상세보기</title>
    <link rel="stylesheet" href="/css/table.css"/>
    <script src="/js/jquery-3.6.0.min.js"></script>
    <script>
        function getParameterByName(name) {
            const url = window.location.href;
            name = name.replace(/[\[\]]/g, '\\$&');
            const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
            const results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        function loadNoticeInfo() {
            let seq = getParameterByName('nSeq');
            if (!seq) {
                alert("잘못된 접근입니다.");
                return;
            }

            $.ajax({
                url: '/inquiry/inquiryInfo',
                type: 'GET',
                data: { nSeq: seq },
                success: function(response) {
                    if (response.message === 'SUCCESS') {
                        const dto = response.data.notice;
                        $('#title').text(dto.title);
                        $('#noticeYn').text(dto.noticeYn === 'Y' ? '공지' : '일반');
                        $('#contents').html(dto.contents.replace(/\n/g, '<br/>'));
                        $('#readCnt').text(dto.readCnt);
                        $('#userId').text(dto.userId);
                        $('#regDt').text(dto.regDt);
                        $('#chgDt').text(dto.chgDt || '-');
                    } else {
                        alert("공지사항을 불러오는 데 실패했습니다.");
                    }
                },
                error: function() {
                    alert("에러가 발생했습니다.");
                }
            });
        }

        $(document).ready(function() {
            loadNoticeInfo();
        });
    </script>
</head>
<body>
<h2>문의 상세보기</h2>
<hr/>
<br/>
<table class="divTable minimalistBlack" style="width: 90%">
    <tr>
        <th>제목</th>
        <td id="title"></td>
    </tr>
    <tr>
        <th>공지글 여부</th>
        <td id="noticeYn"></td>
    </tr>
    <tr>
        <th>내용</th>
        <td id="contents" style="white-space: pre-wrap;"></td>
    </tr>
    <tr>
        <th>조회수</th>
        <td id="readCnt"></td>
    </tr>
    <tr>
        <th>등록자</th>
        <td id="userId"></td>
    </tr>
    <tr>
        <th>등록일</th>
        <td id="regDt"></td>
    </tr>
    <tr>
        <th>수정일</th>
        <td id="chgDt"></td>
    </tr>
</table>
<br/>
<a href="/main/inquiry/inquiryList">목록으로</a>
</body>
</html>